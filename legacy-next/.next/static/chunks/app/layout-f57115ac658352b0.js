(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{24654:function(){},72129:function(e,t,r){Promise.resolve().then(r.bind(r,54529)),Promise.resolve().then(r.bind(r,98747)),Promise.resolve().then(r.bind(r,91839)),Promise.resolve().then(r.bind(r,3707)),Promise.resolve().then(r.bind(r,97623)),Promise.resolve().then(r.bind(r,44829)),Promise.resolve().then(r.bind(r,57861)),Promise.resolve().then(r.t.bind(r,38173,23)),Promise.resolve().then(r.bind(r,49424))},91839:function(e,t,r){"use strict";r.d(t,{default:function(){return m}});var s=r(48646),n=r(57437),o=r(87138),a=r(66648),c={src:"/_next/static/media/logo.6a4d2c21.png",height:72,width:350,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAD1BMVEUxMTEzMjI0NDQ0LCcIa6aWNfDYAAAABXRSTlM+Uy4fKbj5XQIAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAF0lEQVR4nGNgYWRkZGBgYmJgYQbRzEwAAPYAG6BDTYgAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},i=r(78493),l=r(88929),u=r(71733),d=r(91326),h=r(41665);function A(){let e=(0,s._)(["\n  list-style-type: none;\n"]);return A=function(){return e},e}let g=i.Z.li(A());var m=()=>(0,n.jsxs)(l.Z,{component:u.Z,sx:{bgcolor:"white",justifyContent:"space-between",padding:"1rem 8rem"},direction:"row",position:"sticky",children:[(0,n.jsx)(o.default,{href:"/",children:(0,n.jsx)(a.default,{src:c,alt:"TechAway Logo",width:277,height:57})}),(0,n.jsx)(d.Z,{component:"nav",children:(0,n.jsxs)(l.Z,{component:"ul",direction:"row",gap:"3rem",sx:{fontWeight:"bold"},children:[(0,n.jsx)(g,{children:(0,n.jsx)(h.Z,{component:o.default,sx:{textUnderlineOffset:4,textDecorationThickness:2},color:"black",underline:"hover",href:"/dashboard",children:"Dashboard"})}),(0,n.jsx)(g,{children:(0,n.jsx)(h.Z,{component:o.default,sx:{textUnderlineOffset:4,textDecorationThickness:2},color:"black",underline:"hover",href:"/schedule",children:"Schedule"})}),(0,n.jsx)(g,{children:(0,n.jsx)(h.Z,{component:o.default,sx:{textUnderlineOffset:4,textDecorationThickness:2},color:"black",underline:"hover",href:"/tickets",children:"Tickets"})}),(0,n.jsx)(g,{children:(0,n.jsx)(h.Z,{component:o.default,sx:{textUnderlineOffset:4,textDecorationThickness:2},color:"black",underline:"hover",href:"/shop",children:"Shop"})})]})})]})},54529:function(e,t,r){"use strict";r.d(t,{default:function(){return u}});var s=r(57437),n=r(20576),o=r(64702),a=r(33627),c=r(98393),i=r(49714),l={can:async e=>{let{resource:t}=e,r=localStorage.getItem("idToken");if(!r)return{can:!1,reason:"You are not logged in."};let{userData:s}=(0,i.o)(r);return s.role.includes(c.G.ADMIN)||s.role.includes(c.G.TECHNICIAN)&&t===c.G.TECHNICIAN||s.role.includes(c.G.CUSTOMER)&&t===c.G.CUSTOMER?{can:!0}:{can:!1,reason:"You are not authorized to perform this action."}},options:{buttons:{enableAccessControl:!0}}},u=e=>(0,s.jsx)(n.O6,{children:(0,s.jsx)(a.N3,{routerProvider:o.ZP,authProvider:c.Z,accessControlProvider:l,notificationProvider:n.Vu,children:e.children})})},98747:function(e,t,r){"use strict";let s=r(55041).wT;t.default=s},3707:function(e,t,r){"use strict";var s=r(48258),n=r.n(s);let o=(0,r(74050).Z)({typography:{fontFamily:n().style.fontFamily}});t.default=o},98393:function(e,t,r){"use strict";r.d(t,{G:function(){return d},Z:function(){return h}});let s=r(42126).Z.create({baseURL:"/api"}),n=!1,o=[];s.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),s.interceptors.response.use(null,async e=>{if(401!==e.status)return Promise.reject(e);let t=localStorage.getItem("refreshToken");if(!t)return Promise.reject(e);if(n)return new Promise((t,r)=>o.push(()=>({resolve:t,reject:r,config:s(e.config)})));n=!0;let r=await c(t);return r.success?(localStorage.setItem("idToken",r.data.idToken),localStorage.setItem("accessToken",r.data.accessToken),localStorage.setItem("refreshToken",r.data.refreshToken),e.config.headers.Authorization="Bearer ".concat(r.data.accessToken),o.forEach(e=>{let{resolve:t,reject:n,config:o}=e;o.headers.Authorization="Bearer ".concat(r.data.accessToken),s.request(o).then(t).catch(n)}),o.length=0,n=!1,s(e.config)):(n=!1,Promise.reject(e))});let a=async e=>{let{username:t,password:r}=e;try{let e=await s.post("/auth/login/password",{username:t,password:r});return{success:!0,data:e.data}}catch(e){if(401===e.response.status)return{success:!1,message:"Invalid username or password"};return{success:!1,message:e.response.data.message}}},c=async e=>{try{let t=await s.post("/auth/token",{refreshToken:e});return{success:!0,data:t.data}}catch(e){return{success:!1,message:e.response.data.message}}},i=async e=>{try{return await s.put("/auth/token",{refreshToken:e}),{success:!0}}catch(e){return{success:!1,message:e.response.data.message}}},l=async e=>(await s.post("/auth/signup",e)).data;var u=r(49714);let d={ADMIN:"admin",TECHNICIAN:"technician",CUSTOMER:"customer"};var h={login:async e=>{let t=await a({username:e.username,password:e.password});if(!t.success)return{success:!1,error:{name:"Login Error",message:t.message}};let{userData:r}=(0,u.o)(t.data.idToken);return r.role.includes(e.role)||r.role.includes(d.ADMIN)?(localStorage.setItem("idToken",t.data.idToken),localStorage.setItem("accessToken",t.data.accessToken),localStorage.setItem("refreshToken",t.data.refreshToken),{success:!0,error:null,successNotification:{message:"Login successful. Welcome ".concat(r.username,"!")}}):{success:!1,error:{name:"Login Error",message:"You are not a ".concat(e.role)}}},check:async()=>{let e=localStorage.getItem("idToken"),t=localStorage.getItem("accessToken"),r=localStorage.getItem("refreshToken");return e&&t&&r?{authenticated:!0,error:null}:{authenticated:!1,error:{message:"Not logged in",name:"Not logged in"}}},logout:async()=>(await i(localStorage.getItem("refreshToken")),localStorage.removeItem("idToken"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),{success:!0,error:null,redirectTo:"/",successNotification:{message:"Logout successful"}}),onError:e=>{console.error(e)},register:async e=>{try{let t=await l(e);return console.log("userId",t),{success:!0,error:null,successNotification:{message:"Confirmation email sent",description:"Please confirm your email to login."}}}catch(e){return{success:!1,error:{name:"Register Error",message:e.message}}}},getIdentity:()=>{let e=localStorage.getItem("idToken");if(!e)return{id:null,fullName:null,email:null,emailVerified:null,phone:null,address:null,role:null};let{userData:t}=(0,u.o)(e);return{id:t._id,username:t.username,email:t.email,emailVerified:t.emailVerified,phone:t.phone,address:t.address,role:t.role}}}},49424:function(e,t){"use strict";t.default={src:"/_next/static/media/under-construction.35690a29.png",height:797,width:1300,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAASFBMVEVMaXHLnQpwUxWkmZm9jQOwhgmObA6qgDhhRzDLmQmrgg20ig+PbhJpShShegm3iBO3hAqmoZ+YdxuxhAl9YBLBlBHhrgq/lAxROPSJAAAAFnRSTlMA9mwt4fvpHiLhyce3S/ZnMmjzg5SlhSMYuQAAAAlwSFlzAAAuIwAALiMBeKU/dgAAADFJREFUeJwFwQkWwBAMQMH/QpCutCT3v6kZgJEAaqut369gOZdH3TAPjfCPo5zXmr9sHBABoMUp8lQAAAAASUVORK5CYII=",blurWidth:8,blurHeight:5}}},function(e){e.O(0,[487,999,936,303,511,7,292,645,27,971,23,744],function(){return e(e.s=72129)}),_N_E=e.O()}]);